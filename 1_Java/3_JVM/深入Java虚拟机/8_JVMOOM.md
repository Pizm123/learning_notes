## JVM可能会发生哪几种OOM？如何进行排查和处理？

### 1、OOM

1. 当JVM内存严重不足时，会抛出java.lang.OutOfMemoryError：XXXX 错误

2. 根据实际生产经验，OOM是非常严重的问题，一般会对程序日志中的 OutOfMemoryError 配置关键字告警，一经发现，立即处理

### 2、Java Heap Space

​	当堆内存没有足够空间存放新创建的对象时，就会抛出 java.lang.OutOfMemoryError:Java heap space 错误：

1. 请求创建一个超大对象，通常是一个大数组

2. 超出预期的访问量、数据量，比如流量飙升的促销、秒杀活动

3. 内存泄漏（Memory Leak）的出现，大量对象引用没有释放，JVM 无法对其自动回收，比如ThreadLocal、线程池无界队列等





针对大部分情况，通常只需要通过 -Xmx 参数调高 JVM 堆内存空间即可。如果仍然没有解决，可以参考以下情况做进一步处理：



1、如果是超大对象，可以检查其合理性，比如是否一次性查询了数据库全部结果，而没有做结果数限制

2、如果是业务峰值压力，可以考虑添加机器资源，或者做限流降级

3、如果是内存泄漏，需要找到持有的对象，修改代码设计，比如关闭没有释放的连接